<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Im-Plant | Smart Gardening System</title>
<style>
  body {
    font-family: "Roboto", sans-serif;
    text-align: center;
    margin: 0;
    background-color: #eaf4ea;
    transition: background-color 1s;
  }

  #welcome {
    background-color: #2e7d32;
    color: white;
    height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    opacity: 1;
    transition: opacity 1s ease;
  }

  #welcome.fade-out { opacity: 0; }

  #main {
    display: none;
    padding: 2em;
  }

  h1 { font-size: 3em; }

  button {
    margin: 10px;
    padding: 15px 30px;
    font-size: 1.1em;
    border: none;
    border-radius: 10px;
    background-color: #43a047;
    color: white;
    cursor: pointer;
    transition: background-color 0.3s;
  }

  button:hover { background-color: #2e7d32; }
  button:disabled { background-color: grey; cursor: not-allowed; }

  input[type="text"] {
    padding: 10px;
    font-size: 1.1em;
    width: 80%;
    max-width: 400px;
    margin: 10px auto;
    border-radius: 8px;
    border: 1px solid #ccc;
  }

  #plantList, #suggestList {
    margin-top: 20px;
    max-height: 250px;
    overflow-y: auto;
    border: 1px solid #ccc;
    border-radius: 8px;
    display: inline-block;
    padding: 10px;
    background: white;
    width: 80%;
    max-width: 400px;
  }

  .plant-item {
    padding: 10px;
    border-bottom: 1px solid #eee;
    cursor: pointer;
  }

  .plant-item:hover {
    background-color: #f0f0f0;
  }

  @media (max-width: 600px) {
    h1 { font-size: 2em; }
    button { width: 80%; font-size: 1.2em; padding: 18px; }
    input[type="text"] { font-size: 1.2em; }
    #plantList, #suggestList { width: 90%; font-size: 1.1em; }
  }
</style>
</head>
<body>

<div id="welcome">
  <h1>Welcome to Im-Plant</h1>
  <button id="startBtn">Start</button>
</div>

<div id="main">
  <h2>Smart Gardening System</h2>
  <button id="setupBtn">Plant Setup</button>
  <button id="healthBtn" disabled>Plant Health</button>
  <button id="clearBtn">Clear</button>

  <div id="setupSection" style="display:none;">
    <h3>Plant Setup</h3>
    <button id="suggestBtn">Suggest a Plant</button>
    <button id="alreadyBtn">I Already Planted One</button>
    <button id="backSetupBtn">Back</button>
  </div>

  <div id="suggestSection" style="display:none;">
    <h3>Suggested Plants</h3>
    <div id="suggestList"></div>
    <button id="confirmBtn">Confirm</button>
    <button id="backSuggestBtn">Back</button>
  </div>

  <div id="alreadySection" style="display:none;">
    <h3>Search Your Plant</h3>
    <input type="text" id="searchBar" placeholder="Type plant name...">
    <div id="plantList"></div>
    <button id="backAlreadyBtn">Back</button>
  </div>

  <div id="monitorSection" style="display:none;">
    <h3>Plant Monitoring</h3>
    <p>Live Sensor Data: <span id="sensorData"></span></p>
    <p>Current Plant: <span id="currentPlant"></span></p>
    <button id="waterBtn">Water Plant</button>
    <button id="autoBtn">Auto Mode</button>
    <button id="backMonitorBtn">Back</button>
  </div>
</div>

<script>
  const plants = ["Aloe Vera", "Basil", "Cactus", "Coriander", "Lettuce", "Mint", "Oregano", "Rosemary", "Spinach", "Thyme"];
  const startBtn = document.getElementById("startBtn");
  const welcome = document.getElementById("welcome");
  const main = document.getElementById("main");
  const setupBtn = document.getElementById("setupBtn");
  const healthBtn = document.getElementById("healthBtn");
  const clearBtn = document.getElementById("clearBtn");
  const setupSection = document.getElementById("setupSection");
  const suggestSection = document.getElementById("suggestSection");
  const alreadySection = document.getElementById("alreadySection");
  const monitorSection = document.getElementById("monitorSection");
  const suggestBtn = document.getElementById("suggestBtn");
  const alreadyBtn = document.getElementById("alreadyBtn");
  const backSetupBtn = document.getElementById("backSetupBtn");
  const backSuggestBtn = document.getElementById("backSuggestBtn");
  const confirmBtn = document.getElementById("confirmBtn");
  const searchBar = document.getElementById("searchBar");
  const plantList = document.getElementById("plantList");
  const suggestList = document.getElementById("suggestList");
  const backAlreadyBtn = document.getElementById("backAlreadyBtn");
  const backMonitorBtn = document.getElementById("backMonitorBtn");
  const currentPlant = document.getElementById("currentPlant");
  const sensorData = document.getElementById("sensorData");

  let confirmedPlant = localStorage.getItem("confirmedPlant");

  if (confirmedPlant) {
    healthBtn.disabled = false;
    healthBtn.style.backgroundColor = "#43a047";
  }

  startBtn.onclick = () => {
    welcome.classList.add("fade-out");
    setTimeout(() => {
      welcome.style.display = "none";
      main.style.display = "block";
    }, 1000);
  };

  setupBtn.onclick = () => {
    setupSection.style.display = "block";
    suggestSection.style.display = "none";
    alreadySection.style.display = "none";
    monitorSection.style.display = "none";
  };

  healthBtn.onclick = () => {
    if (confirmedPlant) {
      showMonitor();
    }
  };

  suggestBtn.onclick = () => {
    suggestSection.style.display = "block";
    setupSection.style.display = "none";
    suggestList.innerHTML = "";
    plants.sort().forEach(p => {
      const item = document.createElement("div");
      item.textContent = p;
      item.classList.add("plant-item");
      item.onclick = () => selectPlant(p);
      suggestList.appendChild(item);
    });
  };

  alreadyBtn.onclick = () => {
    alreadySection.style.display = "block";
    setupSection.style.display = "none";
    renderPlantList(plants);
  };

  searchBar.oninput = () => {
    const filtered = plants.filter(p => p.toLowerCase().includes(searchBar.value.toLowerCase()));
    renderPlantList(filtered);
  };

  function renderPlantList(list) {
    plantList.innerHTML = "";
    list.sort().forEach(p => {
      const item = document.createElement("div");
      item.textContent = p;
      item.classList.add("plant-item");
      item.onclick = () => selectPlant(p);
      plantList.appendChild(item);
    });
  }

  function selectPlant(p) {
    confirmedPlant = p;
    localStorage.setItem("confirmedPlant", p);
    healthBtn.disabled = false;
    healthBtn.style.backgroundColor = "#43a047";
    showMonitor();
  }

  confirmBtn.onclick = () => {
    if (confirmedPlant) showMonitor();
  };

  function showMonitor() {
    setupSection.style.display = "none";
    suggestSection.style.display = "none";
    alreadySection.style.display = "none";
    monitorSection.style.display = "block";
    currentPlant.textContent = confirmedPlant;
    sensorData.textContent = "Moisture: 60%, Temp: 28Â°C, Light: Medium";
  }

  clearBtn.onclick = () => {
    localStorage.removeItem("confirmedPlant");
    confirmedPlant = null;
    healthBtn.disabled = true;
    healthBtn.style.backgroundColor = "grey";
    currentPlant.textContent = "";
  };

  backSetupBtn.onclick = () => {
    setupSection.style.display = "none";
  };

  backSuggestBtn.onclick = () => {
    suggestSection.style.display = "none";
    setupSection.style.display = "block";
  };

  backAlreadyBtn.onclick = () => {
    alreadySection.style.display = "none";
    setupSection.style.display = "block";
  };

  backMonitorBtn.onclick = () => {
    monitorSection.style.display = "none";
  };
</script>
</body>
</html>
