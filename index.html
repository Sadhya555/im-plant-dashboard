<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Im-Plant | Smart Gardening System</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<style>
  body {
    font-family: 'Roboto', sans-serif;
    background: #f3f3f3;
    margin: 0;
    text-align: center;
  }
  #welcome {
    position: fixed;
    width: 100%;
    height: 100vh;
    background: #2e7d32;
    color: white;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    font-size: 2.5em;
    opacity: 0;
    transition: opacity 1s;
    z-index: 5;
  }
  #main, #setupPage, #monitorPage {
    display: none;
    margin-top: 100px;
  }
  button {
    padding: 10px 20px;
    margin: 8px;
    font-size: 1em;
    border: none;
    border-radius: 6px;
    cursor: pointer;
  }
  #plantSetup, #plantHealth {
    background: #388e3c;
    color: white;
  }
  #clearData {
    background: #c62828;
    color: white;
  }
  #plantHealth.disabled {
    background: #9e9e9e;
    cursor: not-allowed;
  }
  select, input {
    padding: 8px;
    width: 200px;
    margin: 10px;
  }
  #suggestSection, #alreadySection {
    margin-top: 20px;
  }
  .hidden { display: none; }
  #suggestDropdown option {
    padding: 4px;
  }
</style>
</head>
<body>

<div id="welcome">Welcome to Im-Plant</div>

<div id="main">
  <h1>Smart Gardening System</h1>
  <button id="plantSetup">Plant Setup</button>
  <button id="plantHealth" class="disabled" disabled>Plant Health</button><br>
  <button id="clearData">Clear Data</button>
</div>

<div id="setupPage">
  <h2>Plant Setup</h2>
  <button id="suggestBtn">Suggest a Plant</button>
  <button id="alreadyBtn">I Already Planted One</button><br>
  <button id="backHome">Back</button>

  <div id="suggestSection" class="hidden">
    <h3>Suggested Plants (based on sensor data)</h3>
    <select id="suggestDropdown">
      <option>Select a plant</option>
    </select><br>
    <button id="confirmPlant">Confirm Plant</button>
  </div>

  <div id="alreadySection" class="hidden">
    <h3>Search Your Plant</h3>
    <input type="text" id="plantSearch" placeholder="Type plant name...">
    <div id="searchResults"></div>
  </div>
</div>

<div id="monitorPage">
  <h2>Plant Monitor</h2>
  <p id="selectedPlantInfo"></p>
  <button id="waterNow">Water Now</button>
  <button id="autoMode" disabled>Auto Mode</button><br>
  <button id="backMain">Back</button>
</div>

<script>
const plants = [
  {name: "Tomato", temp:[20,30], humidity:[50,70]},
  {name: "Mint", temp:[18,25], humidity:[60,80]},
  {name: "Basil", temp:[22,32], humidity:[40,60]},
  {name: "Chili Pepper", temp:[22,32], humidity:[50,70]},
  {name: "Coriander", temp:[18,27], humidity:[50,70]},
  {name: "Lettuce", temp:[15,25], humidity:[60,80]},
  {name: "Marigold", temp:[18,30], humidity:[50,70]},
  {name: "Lemongrass", temp:[22,32], humidity:[60,80]},
  {name: "Papaya", temp:[22,35], humidity:[50,70]},
  {name: "Lemon", temp:[20,32], humidity:[50,70]},
  {name: "Bitter Gourd (Korola)", temp:[20,30], humidity:[60,80]},
  {name: "Bottle Gourd (Lau)", temp:[22,35], humidity:[60,80]},
  {name: "Pumpkin", temp:[20,30], humidity:[60,70]},
  {name: "Onion", temp:[18,30], humidity:[50,70]},
  {name: "Garlic", temp:[10,25], humidity:[40,60]},
  {name: "Potato", temp:[15,25], humidity:[60,70]},
  {name: "Parsley", temp:[15,25], humidity:[60,70]},
  {name: "Thyme", temp:[18,30], humidity:[40,60]},
  {name: "Oregano", temp:[20,30], humidity:[40,60]},
  {name: "Hibiscus", temp:[22,32], humidity:[60,80]},
  {name: "Jasmine", temp:[20,30], humidity:[60,70]},
  {name: "Sunflower", temp:[20,32], humidity:[50,60]},
  {name: "Petunia", temp:[15,25], humidity:[50,70]},
  {name: "Chrysanthemum", temp:[15,25], humidity:[60,70]},
  {name: "Neem Tree", temp:[25,40], humidity:[30,50]}
];

let selectedPlant = null;

// Simulated sensor data
const sensorData = { temperature: 26, humidity: 65 };

const welcome = document.getElementById('welcome');
const main = document.getElementById('main');
const setupPage = document.getElementById('setupPage');
const monitorPage = document.getElementById('monitorPage');
const plantHealthBtn = document.getElementById('plantHealth');
const suggestSection = document.getElementById('suggestSection');
const alreadySection = document.getElementById('alreadySection');
const dropdown = document.getElementById('suggestDropdown');
const searchResults = document.getElementById('searchResults');

// Welcome fade in
window.onload = () => {
  welcome.style.opacity = 1;
  setTimeout(() => {
    document.addEventListener('click', fadeOutWelcome);
    document.addEventListener('scroll', fadeOutWelcome);
  }, 500);
};

function fadeOutWelcome() {
  welcome.style.opacity = 0;
  setTimeout(() => {
    welcome.style.display = 'none';
    main.style.display = 'block';
  }, 1000);
  document.removeEventListener('click', fadeOutWelcome);
  document.removeEventListener('scroll', fadeOutWelcome);
}

// Navigation
document.getElementById('plantSetup').onclick = () => {
  main.style.display = 'none';
  setupPage.style.display = 'block';
};
document.getElementById('backHome').onclick = () => {
  setupPage.style.display = 'none';
  main.style.display = 'block';
};
document.getElementById('backMain').onclick = () => {
  monitorPage.style.display = 'none';
  main.style.display = 'block';
};
document.getElementById('clearData').onclick = () => {
  selectedPlant = null;
  plantHealthBtn.classList.add('disabled');
  plantHealthBtn.disabled = true;
  alert('Plant data cleared.');
};

// Suggest a Plant
document.getElementById('suggestBtn').onclick = () => {
  alreadySection.classList.add('hidden');
  suggestSection.classList.remove('hidden');
  const filtered = plants.filter(p =>
    sensorData.temperature >= p.temp[0] && sensorData.temperature <= p.temp[1] &&
    sensorData.humidity >= p.humidity[0] && sensorData.humidity <= p.humidity[1]
  );
  dropdown.innerHTML = '<option>Select a plant</option>';
  filtered.forEach(p => {
    const opt = document.createElement('option');
    opt.value = p.name;
    opt.textContent = p.name;
    dropdown.appendChild(opt);
  });
};

document.getElementById('confirmPlant').onclick = () => {
  const selected = dropdown.value;
  if (selected === "Select a plant") return;
  selectedPlant = selected;
  alert("Plant confirmed: " + selectedPlant);
  setupPage.style.display = 'none';
  monitorPage.style.display = 'block';
  document.getElementById('selectedPlantInfo').innerText = `Monitoring: ${selectedPlant}`;
  plantHealthBtn.classList.remove('disabled');
  plantHealthBtn.disabled = false;
};

// Already Planted
document.getElementById('alreadyBtn').onclick = () => {
  suggestSection.classList.add('hidden');
  alreadySection.classList.remove('hidden');
  searchResults.innerHTML = '';
};
document.getElementById('plantSearch').oninput = (e) => {
  const q = e.target.value.toLowerCase();
  searchResults.innerHTML = '';
  if (!q) return;
  const matches = plants.filter(p => p.name.toLowerCase().includes(q));
  if (matches.length === 0) {
    searchResults.textContent = "This plant is not in our database yet.";
  } else {
    matches.forEach(p => {
      const div = document.createElement('div');
      div.textContent = p.name;
      div.style.cursor = "pointer";
      div.onclick = () => {
        selectedPlant = p.name;
        alert("Plant selected: " + selectedPlant);
        setupPage.style.display = 'none';
        monitorPage.style.display = 'block';
        document.getElementById('selectedPlantInfo').innerText = `Monitoring: ${selectedPlant}`;
        plantHealthBtn.classList.remove('disabled');
        plantHealthBtn.disabled = false;
      };
      searchResults.appendChild(div);
    });
  }
};
</script>
</body>
</html>
