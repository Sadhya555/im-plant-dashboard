<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Im-Plant | Smart Gardening System</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Roboto',sans-serif;background:#f5f5f5;color:#222;overflow:hidden}
section{display:none;justify-content:center;align-items:center;flex-direction:column;height:100vh;text-align:center}
button{margin:8px;padding:10px 18px;font-size:16px;border:none;border-radius:6px;cursor:pointer}
.hidden{display:none}
#welcome{background:#2e7d32;color:#fff;animation:fadeIn 1s ease forwards}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
#home h1{font-size:40px;margin-bottom:20px}
#sensor p{margin:5px 0}
#listContainer{max-height:300px;overflow-y:auto;border:1px solid #ccc;padding:10px;width:250px;margin:10px auto}
#listContainer div{padding:6px;cursor:pointer}
#listContainer div:hover{background:#e0e0e0}
#searchResults div{padding:6px;cursor:pointer}
#searchResults div:hover{background:#e0e0e0}
.gray{background:#9e9e9e;color:#fff;cursor:not-allowed}
.green{background:#2e7d32;color:#fff}
.red{background:#c62828;color:#fff}
</style>
</head>
<body>

<section id="welcome">
  <h1>Welcome to<br>Im-Plant</h1>
</section>

<section id="home">
  <h1>Smart Gardening System</h1>
  <div>
    <button id="setupBtn" class="green">Plant Setup</button>
    <button id="healthBtn" class="gray">Plant Health</button>
  </div>
</section>

<section id="setup">
  <div id="sensor">
    <h2>Live Sensor Data</h2>
    <p>Temperature: <span id="temp"></span> °C</p>
    <p>Humidity: <span id="hum"></span> %</p>
    <p>Light: <span id="light"></span> lx</p>
    <p>Soil Moisture: <span id="soil"></span> %</p>
  </div>
  <button id="suggestBtn">Suggest a Plant</button>
  <button id="alreadyBtn">I Already Planted One</button>
  <button id="backHome1">Back</button>

  <div id="suggestSection" class="hidden">
    <h3>Suggested Plants</h3>
    <div id="listContainer"></div>
    <button id="confirmSuggest">Confirm</button>
    <button id="backSuggest">Back</button>
  </div>

  <div id="alreadySection" class="hidden">
    <h3>Search Your Plant</h3>
    <input id="searchInput" placeholder="Type plant name" autocomplete="off">
    <div id="searchResults"></div>
    <button id="selectExisting">Select</button>
    <button id="backAlready">Back</button>
  </div>
</section>

<section id="monitor">
  <h2>Plant Monitoring</h2>
  <p id="plantName"></p>
  <p>Temperature: <span id="m_temp"></span> °C</p>
  <p>Humidity: <span id="m_hum"></span> %</p>
  <p>Light: <span id="m_light"></span> lx</p>
  <p>Soil Moisture: <span id="m_soil"></span> %</p>
  <p id="advice"></p>
  <div>
    <button id="waterNow">Water Now</button>
    <button id="autoMode">Auto Mode: OFF</button>
  </div>
  <button id="backHome2">Back</button>
</section>

<script>
const sections={welcome,home,setup,monitor};
function show(id){for(const s in sections)sections[s].style.display='none';sections[id].style.display='flex';}

const plants=[ // alphabetically sorted
  {name:'Basil',t:[22,32],h:[40,60]},
  {name:'Bitter Gourd (Korola)',t:[20,30],h:[60,80]},
  {name:'Bottle Gourd (Lau)',t:[22,35],h:[60,80]},
  {name:'Chili Pepper',t:[22,32],h:[50,70]},
  {name:'Chrysanthemum',t:[15,25],h:[60,70]},
  {name:'Coriander',t:[18,27],h:[50,70]},
  {name:'Garlic',t:[10,25],h:[40,60]},
  {name:'Hibiscus',t:[22,32],h:[60,80]},
  {name:'Jasmine',t:[20,30],h:[60,70]},
  {name:'Lemon',t:[20,32],h:[50,70]},
  {name:'Lemongrass',t:[22,32],h:[60,80]},
  {name:'Lettuce',t:[15,25],h:[60,80]},
  {name:'Marigold',t:[18,30],h:[50,70]},
  {name:'Mint',t:[18,25],h:[60,80]},
  {name:'Neem Tree',t:[25,40],h:[30,50]},
  {name:'Onion',t:[18,30],h:[50,70]},
  {name:'Oregano',t:[20,30],h:[40,60]},
  {name:'Papaya',t:[22,35],h:[50,70]},
  {name:'Parsley',t:[15,25],h:[60,70]},
  {name:'Petunia',t:[15,25],h:[50,70]},
  {name:'Potato',t:[15,25],h:[60,70]},
  {name:'Pumpkin',t:[20,30],h:[60,70]},
  {name:'Sunflower',t:[20,32],h:[50,60]},
  {name:'Thyme',t:[18,30],h:[40,60]},
  {name:'Tomato',t:[20,30],h:[50,70]}
];

let sensors={temp:25,hum:60,light:3000,soil:50};
let selectedPlant=localStorage.getItem('confirmedPlant')||null;
updateHealthBtn();

function updateHealthBtn(){
  const btn=document.getElementById('healthBtn');
  if(selectedPlant){btn.className='green';btn.disabled=false;}
  else{btn.className='gray';btn.disabled=true;}
}

// welcome fade transition
show('welcome');
document.addEventListener('click',()=>show('home'));

// navigation
setupBtn.onclick=()=>show('setup');
healthBtn.onclick=()=>{if(selectedPlant)show('monitor');};
backHome1.onclick=()=>show('home');
backHome2.onclick=()=>show('home');

// suggest flow
suggestBtn.onclick=()=>{
  document.getElementById('suggestSection').classList.remove('hidden');
  document.getElementById('alreadySection').classList.add('hidden');
  const list=document.getElementById('listContainer');
  list.innerHTML='';
  const match=plants.filter(p=>sensors.temp>=p.t[0]&&sensors.temp<=p.t[1]&&sensors.hum>=p.h[0]&&sensors.hum<=p.h[1]);
  match.sort((a,b)=>a.name.localeCompare(b.name));
  match.forEach(p=>{
    const div=document.createElement('div');
    div.textContent=p.name;
    div.onclick=()=>document.querySelectorAll('#listContainer div').forEach(d=>d.style.backgroundColor=(d.textContent===p.name?'#c8e6c9':'')); 
    list.appendChild(div);
  });
  list.dataset.selected='';
};
backSuggest.onclick=()=>document.getElementById('suggestSection').classList.add('hidden');
confirmSuggest.onclick=()=>{
  const chosen=[...document.querySelectorAll('#listContainer div')].find(d=>d.style.backgroundColor);
  if(!chosen)return alert('Select a plant');
  localStorage.setItem('confirmedPlant',chosen.textContent);
  selectedPlant=chosen.textContent;
  updateHealthBtn();
  show('monitor');
};

// already planted flow
alreadyBtn.onclick=()=>{
  document.getElementById('alreadySection').classList.remove('hidden');
  document.getElementById('suggestSection').classList.add('hidden');
};
backAlready.onclick=()=>document.getElementById('alreadySection').classList.add('hidden');
searchInput.oninput=()=>{
  const q=searchInput.value.toLowerCase();
  const res=document.getElementById('searchResults');
  res.innerHTML='';
  if(!q)return;
  const match=plants.filter(p=>p.name.toLowerCase().includes(q));
  match.forEach(p=>{
    const div=document.createElement('div');
    div.textContent=p.name;
    div.onclick=()=>{searchInput.value=p.name;res.innerHTML='';};
    res.appendChild(div);
  });
};
selectExisting.onclick=()=>{
  const name=searchInput.value.trim();
  if(!plants.find(p=>p.name.toLowerCase()===name.toLowerCase()))return alert('This plant is not in our database yet');
  localStorage.setItem('confirmedPlant',name);
  selectedPlant=name;
  updateHealthBtn();
  show('monitor');
};

// monitoring
let auto=false;
waterNow.onclick=()=>alert('Watering...');
autoMode.onclick=()=>{auto=!auto;autoMode.textContent='Auto Mode: '+(auto?'ON':'OFF');};

// sensors simulation
function updateSensors(){
  sensors.temp=(15+Math.random()*20).toFixed(1);
  sensors.hum=(40+Math.random()*40).toFixed(1);
  sensors.light=(2000+Math.random()*5000).toFixed(0);
  sensors.soil=(30+Math.random()*50).toFixed(0);
  ['temp','hum','light','soil'].forEach(k=>document.getElementById(k).textContent=sensors[k]);
  ['m_temp','m_hum','m_light','m_soil'].forEach((id,i)=>{
    const key=['temp','hum','light','soil'][i];
    document.getElementById(id).textContent=sensors[key];
  });
  document.getElementById('plantName').textContent=selectedPlant?`Monitoring: ${selectedPlant}`:'';
  document.getElementById('advice').textContent= sensors.soil<40?'Soil is dry — water the plant.':sensors.light<2500?'Low light — move to sunlight.':'Ideal conditions.';
}
setInterval(updateSensors,2000);
</script>
</body>
</html>
